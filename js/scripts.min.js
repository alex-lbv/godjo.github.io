"use strict";function trackScroll(){var e=window.pageYOffset,t=document.documentElement.clientHeight;t<e&&goTopBtn.classList.add("to-top--show"),e<t&&goTopBtn.classList.remove("to-top--show")}function backToTop(){0<window.pageYOffset&&(window.scrollBy(0,-80),setTimeout(backToTop,0))}var goTopBtn=document.querySelector(".to-top");function sortList(e){for(var t=document.querySelector(".catalog__list"),c=0;c<t.children.length-1;c++)for(var s=c;s<t.children.length;s++){if(+t.children[c].getAttribute(e)>+t.children[s].getAttribute(e))insertAfter(t.replaceChild(t.children[s],t.children[c]),t.children[c])}}function sortListDesc(e){for(var t=document.querySelector(".catalog__list"),c=0;c<t.children.length-1;c++)for(var s=c;s<t.children.length;s++){if(+t.children[c].getAttribute(e)<+t.children[s].getAttribute(e))insertAfter(t.replaceChild(t.children[s],t.children[c]),t.children[c])}}function insertAfter(e,t){return t.parentNode.insertBefore(e,t.nextSibling)}function validate(e,t){var c=document.forms[e].elements[t].value,s=document.querySelector(".subscribe__wrap");if(0==/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(c))return s.classList.add("invalid"),!1;alert("Вы успешно подписались"),s.classList.remove("invalid"),validate.preventDefault()}window.addEventListener("scroll",trackScroll),goTopBtn.addEventListener("click",backToTop),document.querySelector("#sortPrice").onclick=function(){this.classList.toggle("active"),this.classList.add("focus"),document.querySelector("#sortAmount").classList.remove("focus")},document.querySelector("#sortAmount").onclick=function(){this.classList.toggle("active"),this.classList.add("focus"),document.querySelector("#sortPrice").classList.remove("focus")},document.querySelector(".catalog__sort-btn--asc").onclick=function(){sortList("data-price")},document.querySelector(".catalog__sort-btn--desc").onclick=function(){sortListDesc("data-price")},document.querySelector(".catalog__sort-btn--amount-asc").onclick=function(){sortListDesc("data-amount")},document.querySelector(".catalog__sort-btn--amount-desc").onclick=function(){sortList("data-amount")};var base,baseElements,requestURL="../json/card.json";function sendRequest(s,o){return new Promise(function(e,t){var c=new XMLHttpRequest;c.open(s,o),c.onload=function(){(400<=c.status?t:e)(c.response)},c.onerror=function(){t(c.response)},c.send()})}sendRequest("GET",requestURL).then(function(e){base=JSON.parse(e)}).catch(function(e){console.log(e)}),document.querySelector("#showMore").onclick=function(){window.setTimeout(function(){baseElements=Object.keys(base).length;var t="";Array.prototype.slice.call(base).forEach(function(e){t+='<li class="catalog__item" data-price="'+e.price1+e.price2+e.price3+'" data-amount="'+Object.keys(e.amount).length+'">',t+='<div class="card card--'+e.modifier+'">',t+='<div class="card__image"><img src='+e.image+' alt=""></div>',t+='<h3 class="card__title">'+e.amount+" №"+e.number+"</h3>",t+='<ul><li class="card__type"><pre>'+e.types+"</pre></li>",t+='<li class="card__area"><span>'+e.area+"</span>&nbsp;м&#178;<br><span>площадь</span></li>",t+='<li class="card__floor"><span>'+e.floor+"</span><br/><span>этаж</span></li></ul>",t+='<span class="card__price">'+e.price1+" "+e.price2+" "+e.price3+"<span>&nbsp;руб.</span></span>",t+='<div class="card__choose"><input type="checkbox" id="'+e.idCard+'"><label for="'+e.idCard+'"></label></div>',t+='<span class="card__footer">'+e.modifierValue+"</span>",e.sale&&(t+='<div class="card__sale"><span>'+e.saleValue+"%</span></div>"),e.bigSale&&(t+='<div class="card__sale"><span>'+e.saleValue+"%</span><span>шок цена!</span></div>"),t+="</div>",t+="</li>"}),document.querySelector("#showMore").style.display="none",document.querySelector(".catalog__list").insertAdjacentHTML("beforeend",t)},500)};